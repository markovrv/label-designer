<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Печать на термопринтере</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Печать этикеток на термопринтере</h1>
        </header>
        
        <div class="content">
            <h2>О приложении</h2>
            <p>Это веб-приложение позволяет создавать и редактировать макеты этикеток, а также генерировать PDF-файлы для печати на термопринтерах.</p>
            
            <h2>Возможности приложения</h2>
            <ul>
                <li>Создание и редактирование макетов этикеток с помощью визуального редактора</li>
                <li>Добавление различных элементов: текст, изображения, штрихкоды</li>
                <li>Сохранение и загрузка макетов</li>
                <li>Генерация PDF-файлов из макетов с возможностью замены переменных данными</li>
                <li>Печать этикеток на термопринтерах различных производителей</li>
                <li>Поддержка различных размеров этикеток (по умолчанию 58×40 мм)</li>
            </ul>
            
            <h2>API приложения</h2>
            
            <h3>Методы API для работы с макетами</h3>
            <ul>
                <li>
                    <strong>GET /api/layouts</strong> - получить список всех доступных макетов
                    <ul>
                        <li>Входные параметры: нет</li>
                        <li>Выходные параметры: массив объектов, каждый из которых содержит:
                            <ul>
                                <li><em>name</em>: имя макета без расширения</li>
                                <li><em>filename</em>: полное имя файла макета</li>
                                <li><em>createdAt</em>: дата и время последнего изменения файла</li>
                            </ul>
                        </li>
                        <li>Пример ответа:
                            <pre><code>[
    {
        "name": "med",
        "filename": "med.json",
        "createdAt": "2025-12-18T07:35:34.123Z"
    }
]</code></pre>
                        </li>
                    </ul>
                </li>
                
                <li>
                    <strong>GET /api/layouts/:filename</strong> - получить содержимое конкретного макета
                    <ul>
                        <li>Входные параметры:
                            <ul>
                                <li><em>filename</em>: имя файла макета (например, med.json)</li>
                            </ul>
                        </li>
                        <li>Выходные параметры: JSON-объект с содержимым макета</li>
                        <li>Возможные ошибки:
                            <ul>
                                <li>400: Не указано имя файла или недопустимое имя файла</li>
                                <li>404: Файл макета не найден</li>
                                <li>500: Ошибка сервера при загрузке макета</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                
                <li>
                    <strong>POST /api/layouts/save</strong> - сохранить новый или обновить существующий макет
                    <ul>
                        <li>Входные параметры:
                            <ul>
                                <li><em>name</em>: имя макета (без расширения)</li>
                                <li><em>layoutData</em>: JSON-объект с данными макета</li>
                            </ul>
                        </li>
                        <li>Выходные параметры:
                            <ul>
                                <li><em>message</em>: сообщение об успешном сохранении</li>
                                <li><em>filename</em>: имя сохраненного файла</li>
                            </ul>
                        </li>
                        <li>Возможные ошибки:
                            <ul>
                                <li>400: Отсутствуют обязательные параметры или недопустимое имя файла</li>
                                <li>500: Ошибка сервера при сохранении макета</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                
                <li>
                    <strong>DELETE /api/layouts/:filename</strong> - удалить макет
                    <ul>
                        <li>Входные параметры:
                            <ul>
                                <li><em>filename</em>: имя файла макета для удаления</li>
                            </ul>
                        </li>
                        <li>Выходные параметры:
                            <ul>
                                <li><em>message</em>: сообщение об успешном удалении</li>
                            </ul>
                        </li>
                        <li>Возможные ошибки:
                            <ul>
                                <li>400: Не указано имя файла или недопустимое имя файла</li>
                                <li>404: Файл макета не найден</li>
                                <li>500: Ошибка сервера при удалении макета</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                
                <li>
                    <strong>GET /api/printers</strong> - получить список доступных принтеров
                    <ul>
                        <li>Входные параметры: нет</li>
                        <li>Выходные параметры: массив объектов, каждый из которых содержит:
                            <ul>
                                <li><em>name</em>: логическое имя принтера</li>
                                <li><em>status</em>: статус принтера (готов/не готов)</li>
                            </ul>
                        </li>
                        <li>Возможные ошибки:
                            <ul>
                                <li>500: Ошибка сервера при получении списка принтеров</li>
                            </ul>
                        </li>
                        <li>Пример ответа:
                            <pre><code>[
    {
        "name": "Printer1",
        "status": "ready"
    }
]</code></pre>
                        </li>
                    </ul>
                </li>
                
                <li>
                    <strong>POST /api/print</strong> - универсальный маршрут для печати
                    <ul>
                        <li>Входные параметры:
                            <ul>
                                <li><em>printMode</em>: режим печати (layout, current)</li>
                                <li><em>printData</em>: данные для печати</li>
                                <li><em>template</em>: имя шаблона для печати макета (только для режима layout)</li>
                                <li><em>data</em>: данные для замены переменных в шаблоне (только для режима layout)</li>
                                <li><em>layoutData</em>: данные текущего макета (только для режима current)</li>
                            </ul>
                        </li>
                        <li>Выходные параметры:
                            <ul>
                                <li><em>message</em>: сообщение о результате операции</li>
                                <li><em>result</em>: результат выполнения операции</li>
                            </ul>
                        </li>
                        <li>Возможные режимы печати:
                            <ul>
                                <li><em>text</em>: печать текста (требует printData.text)</li>
                                <li><em>image</em>: печать изображения (требует printData.image в формате base64)</li>
                                <li><em>layout</em>: печать сохраненного макета (требует template и data)</li>
                                <li><em>current</em>: печать текущего вида (требует layoutData)</li>
                            </ul>
                        </li>
                        <li>Возможные ошибки:
                            <ul>
                                <li>400: Отсутствуют необходимые данные для печати</li>
                                <li>404: Макет не найден</li>
                                <li>500: Ошибка сервера при печати</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            
            <h3>Основной маршрут с параметрами</h3>
            <ul>
                <li>
                    <strong>GET /</strong> - основная страница приложения с поддержкой параметров
                    <ul>
                        <li>Входные параметры (в URL строке):
                            <ul>
                                <li><em>template</em>: имя шаблона для загрузки (например, med)</li>
                                <li>все остальные параметры будут переданы в шаблон для замены на их значения</li>
                            </ul>
                        </li>
                        <li>Пример использования: <code>http://localhost:3000/?template=med&sort=льняной&about=полезный</code></li>
                        <li>Функциональность: позволяет загружать определенный шаблон при открытии приложения и передавать дополнительные параметры для настройки интерфейса</li>
                    </ul>
                </li>
            </ul>
            
            <div class="button-group">
                <a href="/" class="btn">Вернуться к редактору</a>
            </div>
        </div>
    </div>
</body>
</html>