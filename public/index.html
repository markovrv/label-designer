<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактор этикеток</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Редактор этикеток</h1>
            <p>Стандартный размер этикетки: 58 × 40 мм</p>
        </header>

        <div class="toolbar">
            <div class="print-mode-selector">
                <button id="addTextBtn">+ текст</button>
                <button id="addImageBtn">+ изображение</button>
            </div>
            <input type="file" id="imageUpload" accept="image/*" style="display: none;">
            <input type="file" id="layoutImport" accept=".json" style="display: none;">

            <div class="print-mode-selector">
                <select id="printModeSelect" onchange="updatePrintModeUI()">
                    <option value="current">Текущий вид</option>
                </select>
                <button id="bixolonPrintBtn">→ Bixolon</button>
                <div id="printerStatus" class="printer-status disconnected">...</div>
                <button id="exportPdfBtn">→ PDF</button>
                <button id="printBtn">→ PNG</button>
            </div>
            <a href="print-info.html" target="_blank"><button type="button">О проекте</button></a>

            <div class="print-mode-selector">
                <input type="color" id="textColorPicker" value="#000000">
                <select id="fontSizeSelector">
                    <option value="12">12px</option>
                    <option value="14" selected>14px</option>
                    <option value="16">16px</option>
                    <option value="18">18px</option>
                    <option value="20">20px</option>
                    <option value="24">24px</option>
                    <option value="28">28px</option>
                    <option value="32">32px</option>
                </select>
                <select id="fontFamilySelector">
                    <option value="Arial" selected>Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Helvetica">Helvetica</option>
                </select>
            </div>
            <div class="print-mode-selector">
                <button id="boldBtn">Ж</button>
                <button id="italicBtn">К</button>
                <button id="alignLeftBtn">←</button>
                <button id="alignCenterBtn">C</button>
                <button id="alignRightBtn">→</button>
            </div>

            <div class="print-mode-selector">
                <button id="importLayoutBtn">Открыть</button>
                <button id="saveLayoutBtn">Сохранить</button>
            </div>

        </div>

        <div class="canvas-container">
            <canvas id="labelCanvas" width="457" height="315"></canvas> <!-- 58*40 мм в пикселях при ~200 dpi -->
        </div>

        <div class="controls">
            <div class="size-controls">
                <label>Ширина (м): <input type="number" id="widthInput" value="58" min="10" max="100"></label>
                <label>Высота (мм): <input type="number" id="heightInput" value="40" min="10" max="100"></label>
                <button id="resizeCanvasBtn">Изменить размер</button>
            </div>
            <div class="print-info">
                <p><strong>Информация о печати:</strong> Для печати на термопринтере экспортируйте дизайн в PDF и
                    используйте соответствующее программное обеспечение принтера.</p>
            </div>
        </div>
    </div>

    <!-- Модальное окно "Сохранить макет" -->
    <div id="saveLayoutModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Сохранить макет</h2>
                <span class="close" id="closeSaveModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="save-layout-input">
                    <label for="layoutNameInputModal">Имя макета:</label>
                    <input type="text" id="layoutNameInputModal" placeholder="Введите имя макета">
                </div>
                <div class="layouts-list-container">
                    <h3>Существующие макеты:</h3>
                    <div id="layoutsListModal" class="layouts-list-modal"></div>
                </div>
                <div class="modal-actions">
                    <button id="saveLayoutModalBtn">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно "Открыть макет" -->
    <div id="openLayoutModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Открыть макет</h2>
                <span class="close" id="closeOpenModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="layouts-list-container">
                    <h3>Сохраненные макеты:</h3>
                    <div id="layoutsListOpenModal" class="layouts-list-modal"></div>
                </div>
                <div class="import-layout-section">
                    <h3>Импорт макета:</h3>
                    <input type="file" id="layoutImportModal" accept=".json" style="display: none;">
                    <button id="importLayoutModalBtn">Выбрать файл</button>
                </div>
                <div class="modal-actions">
                    <button id="refreshLayoutsBtn">Обновить список</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>

</html>