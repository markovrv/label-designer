# BixolonPrinter - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [API –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫](#api-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)
4. [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-–∫–ª–∞—Å—Å–∞)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-—Å–∏—Å—Ç–µ–º–∞–º–∏)
6. [–û—Ç–ª–∞–¥–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞)
7. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## –û–±–∑–æ—Ä

**BixolonPrinter** - —ç—Ç–æ Node.js –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–Ω—Ç–µ—Ä–æ–º —ç—Ç–∏–∫–µ—Ç–æ–∫ **Bixolon XD3-40d** (203 DPI).

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Fabric.js JSON –≤ –∫–æ–º–∞–Ω–¥—ã Web Print SDK
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ (–º–º ‚Üí —Ç–æ—á–∫–∏)
- ‚úÖ –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ ({{variable}})
- ‚úÖ –ü–∞–∫–µ—Ç–Ω–∞—è –ø–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤, QR-–∫–æ–¥–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–µ—á–∞—Ç–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Web Print SDK

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Node.js 14+
- Npm –ø–∞–∫–µ—Ç `axios`
- –ö–æ–º–ø—å—é—Ç–µ—Ä —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Bixolon Web Print SDK
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –∏–ª–∏ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–∏–Ω—Ç–µ—Ä—É

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
npm install axios
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:

```
[Fabric.js JSON]
      ‚Üì
[BixolonPrinter class]
      ‚Üì
    [Internal methods]
    - _createDrawTextCommand()
    - _createDrawBitmapCommand()
    - _createBarcodeCommand()
    - _buildPrintCommands()
      ‚Üì
[JSON –¥–ª—è Web Print SDK]
      ‚Üì
[HTTP POST –∫ Web Print SDK]
      ‚Üì
[XD3-40d –ø—Ä–∏–Ω—Ç–µ—Ä]
      ‚Üì
[–ù–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–∞—è —ç—Ç–∏–∫–µ—Ç–∫–∞]
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞:

```
class BixolonPrinter
‚îú‚îÄ‚îÄ Constructor(host, port, printerName, options)
‚îÇ
‚îú‚îÄ‚îÄ PUBLIC METHODS (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
‚îÇ   ‚îú‚îÄ‚îÄ printLabel(fabricJsonData, printSettings)         [async]
‚îÇ   ‚îú‚îÄ‚îÄ printLabelFromFile(filePath, printSettings)       [async]
‚îÇ   ‚îú‚îÄ‚îÄ replacePlaceholders(fabricJsonData, placeholders)
‚îÇ   ‚îú‚îÄ‚îÄ checkConnection()                                  [async]
‚îÇ   ‚îî‚îÄ‚îÄ getInfo()
‚îÇ
‚îú‚îÄ‚îÄ PRIVATE METHODS (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ pixelsToDots(pixels)
‚îÇ   ‚îú‚îÄ‚îÄ mmToDots(mm)
‚îÇ   ‚îú‚îÄ‚îÄ dotsToMm(dots)
‚îÇ   ‚îú‚îÄ‚îÄ _createDrawTextCommand(obj)
‚îÇ   ‚îú‚îÄ‚îÄ _createDrawBitmapCommand(obj, base64Data)
‚îÇ   ‚îú‚îÄ‚îÄ _createBarcodeCommand(data, x, y, symbol, options)
‚îÇ   ‚îú‚îÄ‚îÄ _createQRCodeCommand(data, x, y, options)
‚îÇ   ‚îú‚îÄ‚îÄ _createDrawRectCommand(obj)
‚îÇ   ‚îú‚îÄ‚îÄ _buildPrintCommands(jsonData, printSettings)
‚îÇ   ‚îú‚îÄ‚îÄ _sendPrintRequest(commands)                        [async]
‚îÇ   ‚îî‚îÄ‚îÄ _log(message, data)
‚îÇ
‚îî‚îÄ‚îÄ PROPERTIES
    ‚îú‚îÄ‚îÄ host, port, printerName
    ‚îú‚îÄ‚îÄ serverURL, timeout, debug
    ‚îú‚îÄ‚îÄ DPI, mmPerInch, pixelsPerDot
    ‚îú‚îÄ‚îÄ issueID
    ‚îú‚îÄ‚îÄ defaultPrintSettings
    ‚îî‚îÄ‚îÄ commandBuffer
```

---

## API –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `constructor(host, port, printerName, options)`

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `host` (string): IP –∞–¥—Ä–µ—Å –∏–ª–∏ –∏–º—è —Ö–æ—Å—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'localhost')
- `port` (number): TCP –ø–æ—Ä—Ç Web Print SDK (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 18080)
- `printerName` (string): –ò–º—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –≤ Web Print SDK (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'LabelPrinter')
- `options` (object):
  - `timeout` (number): Timeout –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30000)
  - `debug` (boolean): –í–∫–ª—é—á–∏—Ç—å debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const printer = new BixolonPrinter(
  '192.168.1.100',
  18080,
  'LabelPrinter',
  { timeout: 45000, debug: true }
);
```

---

#### `async printLabel(fabricJsonData, printSettings)`

–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏ –∏–∑ Fabric.js JSON.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `fabricJsonData` (object): –û–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏:
  - `widthMM` (number): –®–∏—Ä–∏–Ω–∞ —ç—Ç–∏–∫–µ—Ç–∫–∏ –≤ –º–º
  - `heightMM` (number): –í—ã—Å–æ—Ç–∞ —ç—Ç–∏–∫–µ—Ç–∫–∏ –≤ –º–º
  - `objects` (array): –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ Fabric.js
  - `createdAt` (string, optional): ISO –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

- `printSettings` (object, optional): –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—á–∞—Ç–∏:
  - `speed` (1-5, default 4): –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏
  - `density` (1-30, default 12): –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏
  - `gapPercent` (0-1, default 0.1): –ó–∞–∑–æ—Ä –º–µ–∂–¥—É —ç—Ç–∏–∫–µ—Ç–∫–∞–º–∏
  - `orientation` ('T'|'B', default 'T'): –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—á–∞—Ç–∏
  - `mediaType` ('G'|'B'|'C', default 'G'): –¢–∏–ø –Ω–æ—Å–∏—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Promise<Object>
```javascript
{
  success: true,
  requestId: 123456,
  response: {...},
  timestamp: "2025-12-22T11:00:00.000Z"
}
```

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const result = await printer.printLabel(medJson, {
  speed: 5,
  density: 15,
  gapPercent: 0.12
});
console.log('ID –∑–∞–¥–∞–Ω–∏—è:', result.requestId);
```

---

#### `async printLabelFromFile(filePath, printSettings)`

–£–¥–æ–±–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—á–∞—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ med.json.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filePath` (string): –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É med.json
- `printSettings` (object, optional): –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—á–∞—Ç–∏ (—Å–º. –≤—ã—à–µ)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const result = await printer.printLabelFromFile('./med.json', {
  speed: 4,
  density: 12
});
```

---

#### `replacePlaceholders(fabricJsonData, placeholders)`

–ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ {{key}} –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `fabricJsonData` (object): –ò—Å—Ö–æ–¥–Ω—ã–π Fabric JSON
- `placeholders` (object): –û–±—ä–µ–∫—Ç –≤–∏–¥–∞ {key: value, ...}

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Object (–Ω–æ–≤—ã–π JSON —Å –∑–∞–º–µ–Ω–∞–º–∏)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const medJson = JSON.parse(fs.readFileSync('./med.json', 'utf-8'));

const updated = printer.replacePlaceholders(medJson, {
  sort: '–õ–∏–ø–æ–≤—ã–π',
  about: '500–≥',
  price: '350 ‚ÇΩ'
});

const result = await printer.printLabel(updated);
```

---

#### `async checkConnection()`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Web Print SDK –Ω–∞ —Ö–æ—Å—Ç–µ.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Promise<boolean>

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const isAvailable = await printer.checkConnection();
if (isAvailable) {
  console.log('‚úÖ –ú–æ–∂–Ω–æ –ø–µ—á–∞—Ç–∞—Ç—å');
} else {
  console.log('‚ùå –ü—Ä–∏–Ω—Ç–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
}
```

---

#### `getInfo()`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Object
```javascript
{
  model: 'Bixolon XD3-40d',
  dpi: 203,
  host: 'localhost',
  port: 18080,
  printerName: 'LabelPrinter',
  pixelsPerDot: '2.82',
  defaultSettings: {...},
  serverURL: 'http://localhost:18080/WebPrintSDK'
}
```

---

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `pixelsToDots(pixels)`
–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Fabric –ø–∏–∫—Å–µ–ª–∏ ‚Üí –ø—Ä–∏–Ω—Ç–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏ (203 DPI)
```javascript
const dots = printer.pixelsToDots(100);  // ~282 dots
```

#### `mmToDots(mm)`
–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–∏–ª–ª–∏–º–µ—Ç—Ä—ã ‚Üí –ø—Ä–∏–Ω—Ç–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏
```javascript
const dots = printer.mmToDots(58);  // 464 dots
```

#### `dotsToMm(dots)`
–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–æ—á–∫–∏ ‚Üí –º–∏–ª–ª–∏–º–µ—Ç—Ä—ã (–æ–±—Ä–∞—Ç–Ω–∞—è)
```javascript
const mm = printer.dotsToMm(464);  // 58 –º–º
```

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Fabric.js

**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–∞ `circle`.

**–®–∞–≥ 1:** –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `_createDrawCircleCommand`:

```javascript
_createDrawCircleCommand(obj) {
  const x = this.pixelsToDots(obj.left + obj.radius * (obj.scaleX || 1));
  const y = this.pixelsToDots(obj.top + obj.radius * (obj.scaleY || 1));
  const radius = this.pixelsToDots(obj.radius * Math.max(obj.scaleX, obj.scaleY));
  
  return {
    name: 'drawCircle',
    params: {
      x: x,
      y: y,
      radius: radius,
      color: obj.fill || '#000000',
      lineWidth: obj.strokeWidth || 1
    }
  };
}
```

**–®–∞–≥ 2:** –î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥ `renderFabricObjects`:

```javascript
// –í switch –±–ª–æ–∫–µ –≤–Ω—É—Ç—Ä–∏ renderFabricObjects
case 'circle':
  cmd = this._createDrawCircleCommand(obj);
  this._log(`‚≠ï Circle [${idx}]`, { x: obj.left, y: obj.top, radius: obj.radius });
  break;
```

**–®–∞–≥ 3:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

```javascript
const labelJson = {
  widthMM: 58,
  heightMM: 40,
  objects: [
    {
      type: 'circle',
      left: 100,
      top: 100,
      radius: 50,
      fill: '#000000',
      scaleX: 1,
      scaleY: 1
    }
  ]
};

await printer.printLabel(labelJson);
```

---

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤

Bixolon Web Print SDK –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤. –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π:

**–ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PDF417**

```javascript
_createPDF417Command(data, x, y, options = {}) {
  return {
    name: 'drawPDF417',
    params: {
      data: data,
      x: this.pixelsToDots(x),
      y: this.pixelsToDots(y),
      columnNumber: options.columns || 20,
      rowNumber: options.rows || 3,
      moduleWidth: options.moduleWidth || 1,
      moduleHeight: options.moduleHeight || 2,
      eccLevel: options.eccLevel || 4
    }
  };
}
```

---

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–Ω—Ç–µ—Ä–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–Ω—Ç–µ—Ä–∞:

```javascript
class BixolonXD3Customized extends BixolonPrinter {
  constructor(host, port, printerName, options) {
    super(host, port, printerName, options);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    this.customSettings = {
      autoResolution: false,
      cutterMode: 'auto',
      temperatureSensor: true
    };
  }
  
  setCustomSettings(settings) {
    this.customSettings = { ...this.customSettings, ...settings };
  }
}
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏

### Express.js REST API

```javascript
const express = require('express');
const BixolonPrinter = require('./BixolonPrinter');

const app = express();
app.use(express.json());

const printer = new BixolonPrinter('localhost', 18080);

// –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏ –ø–æ API
app.post('/api/print', async (req, res) => {
  try {
    const { jsonData, settings } = req.body;
    const result = await printer.printLabel(jsonData, settings);
    res.json({ success: true, requestId: result.requestId });
  } catch (error) {
    res.status(500).json({ success: false, error: error.message });
  }
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
app.get('/api/status', async (req, res) => {
  const isAvailable = await printer.checkConnection();
  res.json({ available: isAvailable });
});

app.listen(3000);
```

### PostgreSQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```javascript
const { Pool } = require('pg');
const BixolonPrinter = require('./BixolonPrinter');

const pool = new Pool({ connectionString: 'postgres://...' });
const printer = new BixolonPrinter();

async function printProductLabel(productId) {
  // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
  const result = await pool.query(
    'SELECT name, sku, price, json_data FROM products WHERE id = $1',
    [productId]
  );
  
  if (result.rows.length === 0) throw new Error('Product not found');
  
  const { name, sku, price, json_data } = result.rows[0];
  
  // –ó–∞–º–µ–Ω—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
  const labelJson = printer.replacePlaceholders(JSON.parse(json_data), {
    name: name,
    sku: sku,
    price: price
  });
  
  // –ü–µ—á–∞—Ç–∞–µ–º
  const printResult = await printer.printLabel(labelJson);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—á–∞—Ç–∏
  await pool.query(
    'INSERT INTO print_log (product_id, request_id, printed_at) VALUES ($1, $2, $3)',
    [productId, printResult.requestId, new Date()]
  );
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
await printProductLabel(123);
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
const printer = new BixolonPrinter('localhost', 18080, 'LabelPrinter', {
  debug: true
});

// –¢–µ–ø–µ—Ä—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å timestamp
// [2025-12-22T11:00:00.000Z] üñ®Ô∏è  –ù–∞—á–∞–ª–æ –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–∫–∏ {...}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥

```javascript
const printer = new BixolonPrinter();

const medJson = {
  widthMM: 58,
  heightMM: 40,
  objects: [...]
};

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏
const commands = printer._buildPrintCommands(medJson);
console.log(JSON.stringify(commands, null, 2));
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤

```javascript
const printer = new BixolonPrinter();

console.log('Fabric pixels ‚Üí dots:');
[10, 50, 100, 200].forEach(px => {
  console.log(`${px}px = ${printer.pixelsToDots(px)} dots`);
});

console.log('mm ‚Üí dots:');
[10, 25, 50, 58].forEach(mm => {
  console.log(`${mm}mm = ${printer.mmToDots(mm)} dots`);
});
```

### –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ–±–ª–µ–º

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
const available = await printer.checkConnection();
console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:', available ? '‚úÖ' : '‚ùå');

// 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–æ–≤
console.log('–†–∞–∑–º–µ—Ä—ã:', printer.getInfo());

// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É
console.log('–ö–æ–º–∞–Ω–¥—ã:', JSON.stringify(commands, null, 2));

// 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫—É —Å–µ—Ç–∏
try {
  await printer._sendPrintRequest(commands);
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:', error.message);
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã (–ø—Ä–∏–º–µ—Ä–Ω—ã–π –∫–æ–¥ —Å Jest)

```javascript
describe('BixolonPrinter', () => {
  let printer;
  
  beforeEach(() => {
    printer = new BixolonPrinter('localhost', 18080);
  });
  
  test('pixelsToDots –¥–æ–ª–∂–µ–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', () => {
    expect(printer.pixelsToDots(72)).toBe(203); // 72 px * (203/72) ‚âà 203
  });
  
  test('mmToDots –¥–æ–ª–∂–µ–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', () => {
    expect(printer.mmToDots(25.4)).toBe(203); // 25.4 –º–º = 1 –¥—é–π–º = 203 —Ç–æ—á–∫–∏
  });
  
  test('replacePlaceholders –¥–æ–ª–∂–µ–Ω –∑–∞–º–µ–Ω—è—Ç—å {{key}}', () => {
    const json = {
      widthMM: 58,
      heightMM: 40,
      objects: [{type: 'text', text: 'Hello {{name}}'}]
    };
    
    const result = printer.replacePlaceholders(json, {name: 'World'});
    expect(result.objects[0].text).toBe('Hello World');
  });
  
  test('printLabel –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ widthMM', async () => {
    await expect(printer.printLabel({heightMM: 40}))
      .rejects
      .toThrow('–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å widthMM –∏ heightMM');
  });
});
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.0.0 (2025-12-22)
- ‚úÖÂàùÂßãÁâàÊú¨
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ textbox, rect –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–º ‚Üí —Ç–æ—á–∫–∏
- ‚úÖ –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- ‚úÖ –ü–∞–∫–µ—Ç–Ω–∞—è –ø–µ—á–∞—Ç—å

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Vector Font –∏ TrueType Font
- [ ] –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Image (—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤ base64)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RFID –¥–ª—è XD5/BT5 –º–æ–¥–µ–ª–µ–π
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Path –æ–±—ä–µ–∫—Ç–æ–≤ Fabric
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- [ ] WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è real-time –ø–µ—á–∞—Ç–∏

---

## –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∫–æ–¥.

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
